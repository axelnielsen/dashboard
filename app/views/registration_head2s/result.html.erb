<%
txtName=params[:txtName]
txtLastName=params[:txtLastName]
txtAn=params[:txtAn]
txtClub=params[:txtClub]
txtName=params[:txtName]
txtRegion=params[:txtRegion]
arr=params[:competitions]

 arr.each do |e|

%>
<%sql = "select count(*) from track_head2s join track2s
	   on 	track_head2s.id=track2s.track_head2_id
where track_head2s.competition_id="+e[0]+" ;
"   
    arrCount = ActiveRecord::Base.connection.execute(sql)

arrCount.each do |t|
%>

<%
if t[0]==0

sqlTrackHead2s = "insert into track_head2s (competition_id, serie, created_at, updated_at) values("+e+", 'INSCRITOS', '"+Time.now.strftime('%Y/%m/%d')+"', '"+Time.now.strftime('%Y/%m/%d')+"');"   
    arrCount = ActiveRecord::Base.connection.execute(sqlTrackHead2s)


end

sqlTrack2s = "insert into track2s (athlete, track_head2_id, club, region, created_at, updated_at) values('"+txtName+" "+txtLastName+"', "+TrackHead2.last.id.to_s+",'"+txtClub+"', '"+txtRegion+"', '"+Time.now.strftime('%Y/%m/%d')+"', '"+Time.now.strftime('%Y/%m/%d')+"');"   
    arrCount = ActiveRecord::Base.connection.execute(sqlTrack2s)
%>

<%end%>
<%
 end

%>


Aquí va el mensaje del resultado de la inscripción